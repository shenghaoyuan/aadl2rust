RustModule {
    name: "aadlbook_devices",
    docs: [
        "// Auto-generated from AADL package: aadlbook::devices",
    ],
    items: [
        Struct(
            StructDef {
                name: "cameraDevice",
                fields: [
                    Field {
                        name: "picture",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Sender",
                                    [
                                        Array(
                                            Array(
                                                Named(
                                                    "i32",
                                                ),
                                                4,
                                            ),
                                            4,
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: picture Out",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "period_ms",
                        ty: Named(
                            "u64",
                        ),
                        docs: [
                            "// 周期：2000ms",
                        ],
                        attrs: [],
                    },
                ],
                properties: [],
                generics: [],
                derives: [
                    "Debug",
                ],
                docs: [
                    "// AADL Device: camera",
                ],
                vis: Public,
            },
        ),
        Impl(
            ImplBlock {
                target: Named(
                    "cameraDevice",
                ),
                generics: [],
                items: [
                    Method(
                        FunctionDef {
                            name: "new",
                            params: [],
                            return_type: Named(
                                "Self",
                            ),
                            body: Block {
                                stmts: [
                                    Expr(
                                        Ident(
                                            "return Self {\n            picture: None,\n            period_ms: 2000,\n        }",
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Creates a new device instance",
                            ],
                            attrs: [],
                        },
                    ),
                    Method(
                        FunctionDef {
                            name: "run",
                            params: [
                                Param {
                                    name: "self",
                                    ty: Named(
                                        "Self",
                                    ),
                                },
                            ],
                            return_type: Unit,
                            body: Block {
                                stmts: [
                                    Let(
                                        LetStmt {
                                            ifmut: false,
                                            name: "period",
                                            ty: Some(
                                                Path(
                                                    [
                                                        "std",
                                                        "time",
                                                        "Duration",
                                                    ],
                                                ),
                                            ),
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "Duration",
                                                            "from_millis",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [
                                                        Path(
                                                            [
                                                                "self",
                                                                "period_ms",
                                                            ],
                                                            Member,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        },
                                    ),
                                    Let(
                                        LetStmt {
                                            ifmut: true,
                                            name: "rng",
                                            ty: None,
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "rand",
                                                            "thread_rng",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [],
                                                ),
                                            ),
                                        },
                                    ),
                                    Expr(
                                        Loop(
                                            Block {
                                                stmts: [
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "start",
                                                            ty: None,
                                                            init: Some(
                                                                Call(
                                                                    Path(
                                                                        [
                                                                            "Instant",
                                                                            "now",
                                                                        ],
                                                                        Namespace,
                                                                    ),
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "picture_val",
                                                            ty: None,
                                                            init: Some(
                                                                Literal(
                                                                    Int(
                                                                        0,
                                                                    ),
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(tx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "picture",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Let(
                                                                        LetStmt {
                                                                            ifmut: false,
                                                                            name: "_",
                                                                            ty: None,
                                                                            init: Some(
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "tx",
                                                                                    ),
                                                                                    "send",
                                                                                    [
                                                                                        Ident(
                                                                                            "picture_val",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ),
                                                                        },
                                                                    ),
                                                                    Expr(
                                                                        Call(
                                                                            Path(
                                                                                [
                                                                                    "println!",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            [
                                                                                Literal(
                                                                                    Str(
                                                                                        "[camera] send picture = {:?}",
                                                                                    ),
                                                                                ),
                                                                                Ident(
                                                                                    "picture_val",
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "elapsed",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "start",
                                                                    ),
                                                                    "elapsed",
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        If {
                                                            condition: BinaryOp(
                                                                Ident(
                                                                    "elapsed",
                                                                ),
                                                                "<",
                                                                Ident(
                                                                    "period",
                                                                ),
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        MethodCall(
                                                                            Path(
                                                                                [
                                                                                    "std",
                                                                                    "thread",
                                                                                    "sleep",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            "",
                                                                            [
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "period",
                                                                                    ),
                                                                                    "saturating_sub",
                                                                                    [
                                                                                        Ident(
                                                                                            "elapsed",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                ],
                                                expr: None,
                                            },
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Device execution entry point - periodically generates and sends data",
                            ],
                            attrs: [],
                        },
                    ),
                ],
                trait_impl: Some(
                    Named(
                        "Device",
                    ),
                ),
            },
        ),
        Struct(
            StructDef {
                name: "radarDevice",
                fields: [
                    Field {
                        name: "distance_estimate",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Sender",
                                    [
                                        Named(
                                            "bool",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: distance_estimate Out",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "period_ms",
                        ty: Named(
                            "u64",
                        ),
                        docs: [
                            "// 周期：1000ms",
                        ],
                        attrs: [],
                    },
                ],
                properties: [],
                generics: [],
                derives: [
                    "Debug",
                ],
                docs: [
                    "// AADL Device: radar",
                ],
                vis: Public,
            },
        ),
        Impl(
            ImplBlock {
                target: Named(
                    "radarDevice",
                ),
                generics: [],
                items: [
                    Method(
                        FunctionDef {
                            name: "new",
                            params: [],
                            return_type: Named(
                                "Self",
                            ),
                            body: Block {
                                stmts: [
                                    Expr(
                                        Ident(
                                            "return Self {\n            distance_estimate: None,\n            period_ms: 1000,\n        }",
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Creates a new device instance",
                            ],
                            attrs: [],
                        },
                    ),
                    Method(
                        FunctionDef {
                            name: "run",
                            params: [
                                Param {
                                    name: "self",
                                    ty: Named(
                                        "Self",
                                    ),
                                },
                            ],
                            return_type: Unit,
                            body: Block {
                                stmts: [
                                    Let(
                                        LetStmt {
                                            ifmut: false,
                                            name: "period",
                                            ty: Some(
                                                Path(
                                                    [
                                                        "std",
                                                        "time",
                                                        "Duration",
                                                    ],
                                                ),
                                            ),
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "Duration",
                                                            "from_millis",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [
                                                        Path(
                                                            [
                                                                "self",
                                                                "period_ms",
                                                            ],
                                                            Member,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        },
                                    ),
                                    Let(
                                        LetStmt {
                                            ifmut: true,
                                            name: "rng",
                                            ty: None,
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "rand",
                                                            "thread_rng",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [],
                                                ),
                                            ),
                                        },
                                    ),
                                    Expr(
                                        Loop(
                                            Block {
                                                stmts: [
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "start",
                                                            ty: None,
                                                            init: Some(
                                                                Call(
                                                                    Path(
                                                                        [
                                                                            "Instant",
                                                                            "now",
                                                                        ],
                                                                        Namespace,
                                                                    ),
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "distance_estimate_val",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "rng",
                                                                    ),
                                                                    "gen_bool",
                                                                    [
                                                                        Literal(
                                                                            Float(
                                                                                0.9,
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(tx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "distance_estimate",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Let(
                                                                        LetStmt {
                                                                            ifmut: false,
                                                                            name: "_",
                                                                            ty: None,
                                                                            init: Some(
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "tx",
                                                                                    ),
                                                                                    "send",
                                                                                    [
                                                                                        Ident(
                                                                                            "distance_estimate_val",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ),
                                                                        },
                                                                    ),
                                                                    Expr(
                                                                        Call(
                                                                            Path(
                                                                                [
                                                                                    "println!",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            [
                                                                                Literal(
                                                                                    Str(
                                                                                        "[radar] send distance_estimate = {:?}",
                                                                                    ),
                                                                                ),
                                                                                Ident(
                                                                                    "distance_estimate_val",
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "elapsed",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "start",
                                                                    ),
                                                                    "elapsed",
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        If {
                                                            condition: BinaryOp(
                                                                Ident(
                                                                    "elapsed",
                                                                ),
                                                                "<",
                                                                Ident(
                                                                    "period",
                                                                ),
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        MethodCall(
                                                                            Path(
                                                                                [
                                                                                    "std",
                                                                                    "thread",
                                                                                    "sleep",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            "",
                                                                            [
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "period",
                                                                                    ),
                                                                                    "saturating_sub",
                                                                                    [
                                                                                        Ident(
                                                                                            "elapsed",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                ],
                                                expr: None,
                                            },
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Device execution entry point - periodically generates and sends data",
                            ],
                            attrs: [],
                        },
                    ),
                ],
                trait_impl: Some(
                    Named(
                        "Device",
                    ),
                ),
            },
        ),
        Struct(
            StructDef {
                name: "speed_wheel_sensorDevice",
                fields: [
                    Field {
                        name: "speed",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Sender",
                                    [
                                        Named(
                                            "u16",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: speed Out",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "period_ms",
                        ty: Named(
                            "u64",
                        ),
                        docs: [
                            "// 周期：1000ms",
                        ],
                        attrs: [],
                    },
                ],
                properties: [],
                generics: [],
                derives: [
                    "Debug",
                ],
                docs: [
                    "// AADL Device: speed_wheel_sensor",
                ],
                vis: Public,
            },
        ),
        Impl(
            ImplBlock {
                target: Named(
                    "speed_wheel_sensorDevice",
                ),
                generics: [],
                items: [
                    Method(
                        FunctionDef {
                            name: "new",
                            params: [],
                            return_type: Named(
                                "Self",
                            ),
                            body: Block {
                                stmts: [
                                    Expr(
                                        Ident(
                                            "return Self {\n            speed: None,\n            period_ms: 1000,\n        }",
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Creates a new device instance",
                            ],
                            attrs: [],
                        },
                    ),
                    Method(
                        FunctionDef {
                            name: "run",
                            params: [
                                Param {
                                    name: "self",
                                    ty: Named(
                                        "Self",
                                    ),
                                },
                            ],
                            return_type: Unit,
                            body: Block {
                                stmts: [
                                    Let(
                                        LetStmt {
                                            ifmut: false,
                                            name: "period",
                                            ty: Some(
                                                Path(
                                                    [
                                                        "std",
                                                        "time",
                                                        "Duration",
                                                    ],
                                                ),
                                            ),
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "Duration",
                                                            "from_millis",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [
                                                        Path(
                                                            [
                                                                "self",
                                                                "period_ms",
                                                            ],
                                                            Member,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        },
                                    ),
                                    Let(
                                        LetStmt {
                                            ifmut: true,
                                            name: "rng",
                                            ty: None,
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "rand",
                                                            "thread_rng",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [],
                                                ),
                                            ),
                                        },
                                    ),
                                    Expr(
                                        Loop(
                                            Block {
                                                stmts: [
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "start",
                                                            ty: None,
                                                            init: Some(
                                                                Call(
                                                                    Path(
                                                                        [
                                                                            "Instant",
                                                                            "now",
                                                                        ],
                                                                        Namespace,
                                                                    ),
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "speed_val",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "rng",
                                                                    ),
                                                                    "gen_range",
                                                                    [
                                                                        Literal(
                                                                            Int(
                                                                                0,
                                                                            ),
                                                                        ),
                                                                        Literal(
                                                                            Int(
                                                                                201,
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(tx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "speed",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Let(
                                                                        LetStmt {
                                                                            ifmut: false,
                                                                            name: "_",
                                                                            ty: None,
                                                                            init: Some(
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "tx",
                                                                                    ),
                                                                                    "send",
                                                                                    [
                                                                                        Ident(
                                                                                            "speed_val",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ),
                                                                        },
                                                                    ),
                                                                    Expr(
                                                                        Call(
                                                                            Path(
                                                                                [
                                                                                    "println!",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            [
                                                                                Literal(
                                                                                    Str(
                                                                                        "[speed_wheel_sensor] send speed = {:?}",
                                                                                    ),
                                                                                ),
                                                                                Ident(
                                                                                    "speed_val",
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "elapsed",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "start",
                                                                    ),
                                                                    "elapsed",
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        If {
                                                            condition: BinaryOp(
                                                                Ident(
                                                                    "elapsed",
                                                                ),
                                                                "<",
                                                                Ident(
                                                                    "period",
                                                                ),
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        MethodCall(
                                                                            Path(
                                                                                [
                                                                                    "std",
                                                                                    "thread",
                                                                                    "sleep",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            "",
                                                                            [
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "period",
                                                                                    ),
                                                                                    "saturating_sub",
                                                                                    [
                                                                                        Ident(
                                                                                            "elapsed",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                ],
                                                expr: None,
                                            },
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Device execution entry point - periodically generates and sends data",
                            ],
                            attrs: [],
                        },
                    ),
                ],
                trait_impl: Some(
                    Named(
                        "Device",
                    ),
                ),
            },
        ),
        Struct(
            StructDef {
                name: "speed_laser_sensorDevice",
                fields: [
                    Field {
                        name: "speed",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Sender",
                                    [
                                        Named(
                                            "u16",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: speed Out",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "period_ms",
                        ty: Named(
                            "u64",
                        ),
                        docs: [
                            "// 周期：1000ms",
                        ],
                        attrs: [],
                    },
                ],
                properties: [],
                generics: [],
                derives: [
                    "Debug",
                ],
                docs: [
                    "// AADL Device: speed_laser_sensor",
                ],
                vis: Public,
            },
        ),
        Impl(
            ImplBlock {
                target: Named(
                    "speed_laser_sensorDevice",
                ),
                generics: [],
                items: [
                    Method(
                        FunctionDef {
                            name: "new",
                            params: [],
                            return_type: Named(
                                "Self",
                            ),
                            body: Block {
                                stmts: [
                                    Expr(
                                        Ident(
                                            "return Self {\n            speed: None,\n            period_ms: 1000,\n        }",
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Creates a new device instance",
                            ],
                            attrs: [],
                        },
                    ),
                    Method(
                        FunctionDef {
                            name: "run",
                            params: [
                                Param {
                                    name: "self",
                                    ty: Named(
                                        "Self",
                                    ),
                                },
                            ],
                            return_type: Unit,
                            body: Block {
                                stmts: [
                                    Let(
                                        LetStmt {
                                            ifmut: false,
                                            name: "period",
                                            ty: Some(
                                                Path(
                                                    [
                                                        "std",
                                                        "time",
                                                        "Duration",
                                                    ],
                                                ),
                                            ),
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "Duration",
                                                            "from_millis",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [
                                                        Path(
                                                            [
                                                                "self",
                                                                "period_ms",
                                                            ],
                                                            Member,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        },
                                    ),
                                    Let(
                                        LetStmt {
                                            ifmut: true,
                                            name: "rng",
                                            ty: None,
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "rand",
                                                            "thread_rng",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [],
                                                ),
                                            ),
                                        },
                                    ),
                                    Expr(
                                        Loop(
                                            Block {
                                                stmts: [
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "start",
                                                            ty: None,
                                                            init: Some(
                                                                Call(
                                                                    Path(
                                                                        [
                                                                            "Instant",
                                                                            "now",
                                                                        ],
                                                                        Namespace,
                                                                    ),
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "speed_val",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "rng",
                                                                    ),
                                                                    "gen_range",
                                                                    [
                                                                        Literal(
                                                                            Int(
                                                                                0,
                                                                            ),
                                                                        ),
                                                                        Literal(
                                                                            Int(
                                                                                201,
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(tx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "speed",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Let(
                                                                        LetStmt {
                                                                            ifmut: false,
                                                                            name: "_",
                                                                            ty: None,
                                                                            init: Some(
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "tx",
                                                                                    ),
                                                                                    "send",
                                                                                    [
                                                                                        Ident(
                                                                                            "speed_val",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ),
                                                                        },
                                                                    ),
                                                                    Expr(
                                                                        Call(
                                                                            Path(
                                                                                [
                                                                                    "println!",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            [
                                                                                Literal(
                                                                                    Str(
                                                                                        "[speed_laser_sensor] send speed = {:?}",
                                                                                    ),
                                                                                ),
                                                                                Ident(
                                                                                    "speed_val",
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "elapsed",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "start",
                                                                    ),
                                                                    "elapsed",
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        If {
                                                            condition: BinaryOp(
                                                                Ident(
                                                                    "elapsed",
                                                                ),
                                                                "<",
                                                                Ident(
                                                                    "period",
                                                                ),
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        MethodCall(
                                                                            Path(
                                                                                [
                                                                                    "std",
                                                                                    "thread",
                                                                                    "sleep",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            "",
                                                                            [
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "period",
                                                                                    ),
                                                                                    "saturating_sub",
                                                                                    [
                                                                                        Ident(
                                                                                            "elapsed",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                ],
                                                expr: None,
                                            },
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Device execution entry point - periodically generates and sends data",
                            ],
                            attrs: [],
                        },
                    ),
                ],
                trait_impl: Some(
                    Named(
                        "Device",
                    ),
                ),
            },
        ),
        Struct(
            StructDef {
                name: "brakeDevice",
                fields: [
                    Field {
                        name: "cmd",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Receiver",
                                    [
                                        Named(
                                            "i8",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: cmd In",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "period_ms",
                        ty: Named(
                            "u64",
                        ),
                        docs: [
                            "// 周期：100ms",
                        ],
                        attrs: [],
                    },
                ],
                properties: [],
                generics: [],
                derives: [
                    "Debug",
                ],
                docs: [
                    "// AADL Device: brake",
                ],
                vis: Public,
            },
        ),
        Impl(
            ImplBlock {
                target: Named(
                    "brakeDevice",
                ),
                generics: [],
                items: [
                    Method(
                        FunctionDef {
                            name: "new",
                            params: [],
                            return_type: Named(
                                "Self",
                            ),
                            body: Block {
                                stmts: [
                                    Expr(
                                        Ident(
                                            "return Self {\n            cmd: None,\n            period_ms: 100,\n        }",
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Creates a new device instance",
                            ],
                            attrs: [],
                        },
                    ),
                    Method(
                        FunctionDef {
                            name: "run",
                            params: [
                                Param {
                                    name: "self",
                                    ty: Named(
                                        "Self",
                                    ),
                                },
                            ],
                            return_type: Unit,
                            body: Block {
                                stmts: [
                                    Let(
                                        LetStmt {
                                            ifmut: false,
                                            name: "period",
                                            ty: Some(
                                                Path(
                                                    [
                                                        "std",
                                                        "time",
                                                        "Duration",
                                                    ],
                                                ),
                                            ),
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "Duration",
                                                            "from_millis",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [
                                                        Path(
                                                            [
                                                                "self",
                                                                "period_ms",
                                                            ],
                                                            Member,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        },
                                    ),
                                    Expr(
                                        Loop(
                                            Block {
                                                stmts: [
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "start",
                                                            ty: None,
                                                            init: Some(
                                                                Call(
                                                                    Path(
                                                                        [
                                                                            "Instant",
                                                                            "now",
                                                                        ],
                                                                        Namespace,
                                                                    ),
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Comment(
                                                        "// --- 从输入端口接收数据 ---",
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(rx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "cmd",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        IfLet {
                                                                            pattern: "Ok(cmd_in_val)",
                                                                            value: MethodCall(
                                                                                Ident(
                                                                                    "rx",
                                                                                ),
                                                                                "try_recv",
                                                                                [],
                                                                            ),
                                                                            then_branch: Block {
                                                                                stmts: [
                                                                                    Expr(
                                                                                        Call(
                                                                                            Path(
                                                                                                [
                                                                                                    "println!",
                                                                                                ],
                                                                                                Namespace,
                                                                                            ),
                                                                                            [
                                                                                                Literal(
                                                                                                    Str(
                                                                                                        "[brake] Received cmd: {:?}",
                                                                                                    ),
                                                                                                ),
                                                                                                Ident(
                                                                                                    "cmd_in_val",
                                                                                                ),
                                                                                            ],
                                                                                        ),
                                                                                    ),
                                                                                    Comment(
                                                                                        "// TODO: 在此处加入执行逻辑",
                                                                                    ),
                                                                                ],
                                                                                expr: None,
                                                                            },
                                                                            else_branch: None,
                                                                        },
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "elapsed",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "start",
                                                                    ),
                                                                    "elapsed",
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        If {
                                                            condition: BinaryOp(
                                                                Ident(
                                                                    "elapsed",
                                                                ),
                                                                "<",
                                                                Ident(
                                                                    "period",
                                                                ),
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        MethodCall(
                                                                            Path(
                                                                                [
                                                                                    "std",
                                                                                    "thread",
                                                                                    "sleep",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            "",
                                                                            [
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "period",
                                                                                    ),
                                                                                    "saturating_sub",
                                                                                    [
                                                                                        Ident(
                                                                                            "elapsed",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                ],
                                                expr: None,
                                            },
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Device execution entry point - periodically generates and sends data",
                            ],
                            attrs: [],
                        },
                    ),
                ],
                trait_impl: Some(
                    Named(
                        "Device",
                    ),
                ),
            },
        ),
        Struct(
            StructDef {
                name: "accelerationDevice",
                fields: [
                    Field {
                        name: "cmd",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Receiver",
                                    [
                                        Named(
                                            "i8",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: cmd In",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "period_ms",
                        ty: Named(
                            "u64",
                        ),
                        docs: [
                            "// 周期：100ms",
                        ],
                        attrs: [],
                    },
                ],
                properties: [],
                generics: [],
                derives: [
                    "Debug",
                ],
                docs: [
                    "// AADL Device: acceleration",
                ],
                vis: Public,
            },
        ),
        Impl(
            ImplBlock {
                target: Named(
                    "accelerationDevice",
                ),
                generics: [],
                items: [
                    Method(
                        FunctionDef {
                            name: "new",
                            params: [],
                            return_type: Named(
                                "Self",
                            ),
                            body: Block {
                                stmts: [
                                    Expr(
                                        Ident(
                                            "return Self {\n            cmd: None,\n            period_ms: 100,\n        }",
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Creates a new device instance",
                            ],
                            attrs: [],
                        },
                    ),
                    Method(
                        FunctionDef {
                            name: "run",
                            params: [
                                Param {
                                    name: "self",
                                    ty: Named(
                                        "Self",
                                    ),
                                },
                            ],
                            return_type: Unit,
                            body: Block {
                                stmts: [
                                    Let(
                                        LetStmt {
                                            ifmut: false,
                                            name: "period",
                                            ty: Some(
                                                Path(
                                                    [
                                                        "std",
                                                        "time",
                                                        "Duration",
                                                    ],
                                                ),
                                            ),
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "Duration",
                                                            "from_millis",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [
                                                        Path(
                                                            [
                                                                "self",
                                                                "period_ms",
                                                            ],
                                                            Member,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        },
                                    ),
                                    Expr(
                                        Loop(
                                            Block {
                                                stmts: [
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "start",
                                                            ty: None,
                                                            init: Some(
                                                                Call(
                                                                    Path(
                                                                        [
                                                                            "Instant",
                                                                            "now",
                                                                        ],
                                                                        Namespace,
                                                                    ),
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Comment(
                                                        "// --- 从输入端口接收数据 ---",
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(rx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "cmd",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        IfLet {
                                                                            pattern: "Ok(cmd_in_val)",
                                                                            value: MethodCall(
                                                                                Ident(
                                                                                    "rx",
                                                                                ),
                                                                                "try_recv",
                                                                                [],
                                                                            ),
                                                                            then_branch: Block {
                                                                                stmts: [
                                                                                    Expr(
                                                                                        Call(
                                                                                            Path(
                                                                                                [
                                                                                                    "println!",
                                                                                                ],
                                                                                                Namespace,
                                                                                            ),
                                                                                            [
                                                                                                Literal(
                                                                                                    Str(
                                                                                                        "[acceleration] Received cmd: {:?}",
                                                                                                    ),
                                                                                                ),
                                                                                                Ident(
                                                                                                    "cmd_in_val",
                                                                                                ),
                                                                                            ],
                                                                                        ),
                                                                                    ),
                                                                                    Comment(
                                                                                        "// TODO: 在此处加入执行逻辑",
                                                                                    ),
                                                                                ],
                                                                                expr: None,
                                                                            },
                                                                            else_branch: None,
                                                                        },
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "elapsed",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "start",
                                                                    ),
                                                                    "elapsed",
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        If {
                                                            condition: BinaryOp(
                                                                Ident(
                                                                    "elapsed",
                                                                ),
                                                                "<",
                                                                Ident(
                                                                    "period",
                                                                ),
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        MethodCall(
                                                                            Path(
                                                                                [
                                                                                    "std",
                                                                                    "thread",
                                                                                    "sleep",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            "",
                                                                            [
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "period",
                                                                                    ),
                                                                                    "saturating_sub",
                                                                                    [
                                                                                        Ident(
                                                                                            "elapsed",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                ],
                                                expr: None,
                                            },
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Device execution entry point - periodically generates and sends data",
                            ],
                            attrs: [],
                        },
                    ),
                ],
                trait_impl: Some(
                    Named(
                        "Device",
                    ),
                ),
            },
        ),
        Struct(
            StructDef {
                name: "panelDevice",
                fields: [
                    Field {
                        name: "increase_speed",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Sender",
                                    [
                                        Named(
                                            "u16",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: increase_speed Out",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "decrease_speed",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Sender",
                                    [
                                        Named(
                                            "u16",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: decrease_speed Out",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "period_ms",
                        ty: Named(
                            "u64",
                        ),
                        docs: [
                            "// 周期：2000ms",
                        ],
                        attrs: [],
                    },
                ],
                properties: [],
                generics: [],
                derives: [
                    "Debug",
                ],
                docs: [
                    "// AADL Device: panel",
                ],
                vis: Public,
            },
        ),
        Impl(
            ImplBlock {
                target: Named(
                    "panelDevice",
                ),
                generics: [],
                items: [
                    Method(
                        FunctionDef {
                            name: "new",
                            params: [],
                            return_type: Named(
                                "Self",
                            ),
                            body: Block {
                                stmts: [
                                    Expr(
                                        Ident(
                                            "return Self {\n            increase_speed: None,\n            decrease_speed: None,\n            period_ms: 2000,\n        }",
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Creates a new device instance",
                            ],
                            attrs: [],
                        },
                    ),
                    Method(
                        FunctionDef {
                            name: "run",
                            params: [
                                Param {
                                    name: "self",
                                    ty: Named(
                                        "Self",
                                    ),
                                },
                            ],
                            return_type: Unit,
                            body: Block {
                                stmts: [
                                    Let(
                                        LetStmt {
                                            ifmut: false,
                                            name: "period",
                                            ty: Some(
                                                Path(
                                                    [
                                                        "std",
                                                        "time",
                                                        "Duration",
                                                    ],
                                                ),
                                            ),
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "Duration",
                                                            "from_millis",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [
                                                        Path(
                                                            [
                                                                "self",
                                                                "period_ms",
                                                            ],
                                                            Member,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        },
                                    ),
                                    Let(
                                        LetStmt {
                                            ifmut: true,
                                            name: "rng",
                                            ty: None,
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "rand",
                                                            "thread_rng",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [],
                                                ),
                                            ),
                                        },
                                    ),
                                    Expr(
                                        Loop(
                                            Block {
                                                stmts: [
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "start",
                                                            ty: None,
                                                            init: Some(
                                                                Call(
                                                                    Path(
                                                                        [
                                                                            "Instant",
                                                                            "now",
                                                                        ],
                                                                        Namespace,
                                                                    ),
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "increase_speed_val",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "rng",
                                                                    ),
                                                                    "gen_range",
                                                                    [
                                                                        Literal(
                                                                            Int(
                                                                                0,
                                                                            ),
                                                                        ),
                                                                        Literal(
                                                                            Int(
                                                                                201,
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(tx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "increase_speed",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Let(
                                                                        LetStmt {
                                                                            ifmut: false,
                                                                            name: "_",
                                                                            ty: None,
                                                                            init: Some(
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "tx",
                                                                                    ),
                                                                                    "send",
                                                                                    [
                                                                                        Ident(
                                                                                            "increase_speed_val",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ),
                                                                        },
                                                                    ),
                                                                    Expr(
                                                                        Call(
                                                                            Path(
                                                                                [
                                                                                    "println!",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            [
                                                                                Literal(
                                                                                    Str(
                                                                                        "[panel] send increase_speed = {:?}",
                                                                                    ),
                                                                                ),
                                                                                Ident(
                                                                                    "increase_speed_val",
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "decrease_speed_val",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "rng",
                                                                    ),
                                                                    "gen_range",
                                                                    [
                                                                        Literal(
                                                                            Int(
                                                                                0,
                                                                            ),
                                                                        ),
                                                                        Literal(
                                                                            Int(
                                                                                201,
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(tx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "decrease_speed",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Let(
                                                                        LetStmt {
                                                                            ifmut: false,
                                                                            name: "_",
                                                                            ty: None,
                                                                            init: Some(
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "tx",
                                                                                    ),
                                                                                    "send",
                                                                                    [
                                                                                        Ident(
                                                                                            "decrease_speed_val",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ),
                                                                        },
                                                                    ),
                                                                    Expr(
                                                                        Call(
                                                                            Path(
                                                                                [
                                                                                    "println!",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            [
                                                                                Literal(
                                                                                    Str(
                                                                                        "[panel] send decrease_speed = {:?}",
                                                                                    ),
                                                                                ),
                                                                                Ident(
                                                                                    "decrease_speed_val",
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "elapsed",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "start",
                                                                    ),
                                                                    "elapsed",
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        If {
                                                            condition: BinaryOp(
                                                                Ident(
                                                                    "elapsed",
                                                                ),
                                                                "<",
                                                                Ident(
                                                                    "period",
                                                                ),
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        MethodCall(
                                                                            Path(
                                                                                [
                                                                                    "std",
                                                                                    "thread",
                                                                                    "sleep",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            "",
                                                                            [
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "period",
                                                                                    ),
                                                                                    "saturating_sub",
                                                                                    [
                                                                                        Ident(
                                                                                            "elapsed",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                ],
                                                expr: None,
                                            },
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Device execution entry point - periodically generates and sends data",
                            ],
                            attrs: [],
                        },
                    ),
                ],
                trait_impl: Some(
                    Named(
                        "Device",
                    ),
                ),
            },
        ),
        Struct(
            StructDef {
                name: "screenDevice",
                fields: [
                    Field {
                        name: "tire_pressure",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Receiver",
                                    [
                                        Named(
                                            "i8",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: tire_pressure In",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "desired_speed",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "BcReceiver",
                                    [
                                        Named(
                                            "u16",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: desired_speed In",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "actual_speed",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "BcReceiver",
                                    [
                                        Named(
                                            "u16",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: actual_speed In",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "warning",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Receiver",
                                    [
                                        Named(
                                            "bool",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: warning In",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "entertainment_infos",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Receiver",
                                    [
                                        Named(
                                            "i8",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: entertainment_infos In",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "period_ms",
                        ty: Named(
                            "u64",
                        ),
                        docs: [
                            "// 周期：2000ms",
                        ],
                        attrs: [],
                    },
                ],
                properties: [],
                generics: [],
                derives: [
                    "Debug",
                ],
                docs: [
                    "// AADL Device: screen",
                ],
                vis: Public,
            },
        ),
        Impl(
            ImplBlock {
                target: Named(
                    "screenDevice",
                ),
                generics: [],
                items: [
                    Method(
                        FunctionDef {
                            name: "new",
                            params: [],
                            return_type: Named(
                                "Self",
                            ),
                            body: Block {
                                stmts: [
                                    Expr(
                                        Ident(
                                            "return Self {\n            tire_pressure: None,\n            desired_speed: None,\n            actual_speed: None,\n            warning: None,\n            entertainment_infos: None,\n            period_ms: 2000,\n        }",
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Creates a new device instance",
                            ],
                            attrs: [],
                        },
                    ),
                    Method(
                        FunctionDef {
                            name: "run",
                            params: [
                                Param {
                                    name: "self",
                                    ty: Named(
                                        "Self",
                                    ),
                                },
                            ],
                            return_type: Unit,
                            body: Block {
                                stmts: [
                                    Let(
                                        LetStmt {
                                            ifmut: false,
                                            name: "period",
                                            ty: Some(
                                                Path(
                                                    [
                                                        "std",
                                                        "time",
                                                        "Duration",
                                                    ],
                                                ),
                                            ),
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "Duration",
                                                            "from_millis",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [
                                                        Path(
                                                            [
                                                                "self",
                                                                "period_ms",
                                                            ],
                                                            Member,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        },
                                    ),
                                    Expr(
                                        Loop(
                                            Block {
                                                stmts: [
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "start",
                                                            ty: None,
                                                            init: Some(
                                                                Call(
                                                                    Path(
                                                                        [
                                                                            "Instant",
                                                                            "now",
                                                                        ],
                                                                        Namespace,
                                                                    ),
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Comment(
                                                        "// --- 从输入端口接收数据 ---",
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(rx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "tire_pressure",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        IfLet {
                                                                            pattern: "Ok(tire_pressure_in_val)",
                                                                            value: MethodCall(
                                                                                Ident(
                                                                                    "rx",
                                                                                ),
                                                                                "try_recv",
                                                                                [],
                                                                            ),
                                                                            then_branch: Block {
                                                                                stmts: [
                                                                                    Expr(
                                                                                        Call(
                                                                                            Path(
                                                                                                [
                                                                                                    "println!",
                                                                                                ],
                                                                                                Namespace,
                                                                                            ),
                                                                                            [
                                                                                                Literal(
                                                                                                    Str(
                                                                                                        "[screen] Received tire_pressure: {:?}",
                                                                                                    ),
                                                                                                ),
                                                                                                Ident(
                                                                                                    "tire_pressure_in_val",
                                                                                                ),
                                                                                            ],
                                                                                        ),
                                                                                    ),
                                                                                    Comment(
                                                                                        "// TODO: 在此处加入执行逻辑",
                                                                                    ),
                                                                                ],
                                                                                expr: None,
                                                                            },
                                                                            else_branch: None,
                                                                        },
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(rx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "desired_speed",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        IfLet {
                                                                            pattern: "Ok(desired_speed_in_val)",
                                                                            value: MethodCall(
                                                                                Ident(
                                                                                    "rx",
                                                                                ),
                                                                                "try_recv",
                                                                                [],
                                                                            ),
                                                                            then_branch: Block {
                                                                                stmts: [
                                                                                    Expr(
                                                                                        Call(
                                                                                            Path(
                                                                                                [
                                                                                                    "println!",
                                                                                                ],
                                                                                                Namespace,
                                                                                            ),
                                                                                            [
                                                                                                Literal(
                                                                                                    Str(
                                                                                                        "[screen] Received desired_speed: {:?}",
                                                                                                    ),
                                                                                                ),
                                                                                                Ident(
                                                                                                    "desired_speed_in_val",
                                                                                                ),
                                                                                            ],
                                                                                        ),
                                                                                    ),
                                                                                    Comment(
                                                                                        "// TODO: 在此处加入执行逻辑",
                                                                                    ),
                                                                                ],
                                                                                expr: None,
                                                                            },
                                                                            else_branch: None,
                                                                        },
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(rx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "actual_speed",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        IfLet {
                                                                            pattern: "Ok(actual_speed_in_val)",
                                                                            value: MethodCall(
                                                                                Ident(
                                                                                    "rx",
                                                                                ),
                                                                                "try_recv",
                                                                                [],
                                                                            ),
                                                                            then_branch: Block {
                                                                                stmts: [
                                                                                    Expr(
                                                                                        Call(
                                                                                            Path(
                                                                                                [
                                                                                                    "println!",
                                                                                                ],
                                                                                                Namespace,
                                                                                            ),
                                                                                            [
                                                                                                Literal(
                                                                                                    Str(
                                                                                                        "[screen] Received actual_speed: {:?}",
                                                                                                    ),
                                                                                                ),
                                                                                                Ident(
                                                                                                    "actual_speed_in_val",
                                                                                                ),
                                                                                            ],
                                                                                        ),
                                                                                    ),
                                                                                    Comment(
                                                                                        "// TODO: 在此处加入执行逻辑",
                                                                                    ),
                                                                                ],
                                                                                expr: None,
                                                                            },
                                                                            else_branch: None,
                                                                        },
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(rx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "warning",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        IfLet {
                                                                            pattern: "Ok(warning_in_val)",
                                                                            value: MethodCall(
                                                                                Ident(
                                                                                    "rx",
                                                                                ),
                                                                                "try_recv",
                                                                                [],
                                                                            ),
                                                                            then_branch: Block {
                                                                                stmts: [
                                                                                    Expr(
                                                                                        Call(
                                                                                            Path(
                                                                                                [
                                                                                                    "println!",
                                                                                                ],
                                                                                                Namespace,
                                                                                            ),
                                                                                            [
                                                                                                Literal(
                                                                                                    Str(
                                                                                                        "[screen] Received warning: {:?}",
                                                                                                    ),
                                                                                                ),
                                                                                                Ident(
                                                                                                    "warning_in_val",
                                                                                                ),
                                                                                            ],
                                                                                        ),
                                                                                    ),
                                                                                    Comment(
                                                                                        "// TODO: 在此处加入执行逻辑",
                                                                                    ),
                                                                                ],
                                                                                expr: None,
                                                                            },
                                                                            else_branch: None,
                                                                        },
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(rx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "entertainment_infos",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        IfLet {
                                                                            pattern: "Ok(entertainment_infos_in_val)",
                                                                            value: MethodCall(
                                                                                Ident(
                                                                                    "rx",
                                                                                ),
                                                                                "try_recv",
                                                                                [],
                                                                            ),
                                                                            then_branch: Block {
                                                                                stmts: [
                                                                                    Expr(
                                                                                        Call(
                                                                                            Path(
                                                                                                [
                                                                                                    "println!",
                                                                                                ],
                                                                                                Namespace,
                                                                                            ),
                                                                                            [
                                                                                                Literal(
                                                                                                    Str(
                                                                                                        "[screen] Received entertainment_infos: {:?}",
                                                                                                    ),
                                                                                                ),
                                                                                                Ident(
                                                                                                    "entertainment_infos_in_val",
                                                                                                ),
                                                                                            ],
                                                                                        ),
                                                                                    ),
                                                                                    Comment(
                                                                                        "// TODO: 在此处加入执行逻辑",
                                                                                    ),
                                                                                ],
                                                                                expr: None,
                                                                            },
                                                                            else_branch: None,
                                                                        },
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "elapsed",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "start",
                                                                    ),
                                                                    "elapsed",
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        If {
                                                            condition: BinaryOp(
                                                                Ident(
                                                                    "elapsed",
                                                                ),
                                                                "<",
                                                                Ident(
                                                                    "period",
                                                                ),
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        MethodCall(
                                                                            Path(
                                                                                [
                                                                                    "std",
                                                                                    "thread",
                                                                                    "sleep",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            "",
                                                                            [
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "period",
                                                                                    ),
                                                                                    "saturating_sub",
                                                                                    [
                                                                                        Ident(
                                                                                            "elapsed",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                ],
                                                expr: None,
                                            },
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Device execution entry point - periodically generates and sends data",
                            ],
                            attrs: [],
                        },
                    ),
                ],
                trait_impl: Some(
                    Named(
                        "Device",
                    ),
                ),
            },
        ),
        Struct(
            StructDef {
                name: "tpmsDevice",
                fields: [
                    Field {
                        name: "pressure",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Sender",
                                    [
                                        Named(
                                            "i8",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: pressure Out",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "period_ms",
                        ty: Named(
                            "u64",
                        ),
                        docs: [
                            "// 周期：2000ms",
                        ],
                        attrs: [],
                    },
                ],
                properties: [],
                generics: [],
                derives: [
                    "Debug",
                ],
                docs: [
                    "// AADL Device: tpms",
                ],
                vis: Public,
            },
        ),
        Impl(
            ImplBlock {
                target: Named(
                    "tpmsDevice",
                ),
                generics: [],
                items: [
                    Method(
                        FunctionDef {
                            name: "new",
                            params: [],
                            return_type: Named(
                                "Self",
                            ),
                            body: Block {
                                stmts: [
                                    Expr(
                                        Ident(
                                            "return Self {\n            pressure: None,\n            period_ms: 2000,\n        }",
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Creates a new device instance",
                            ],
                            attrs: [],
                        },
                    ),
                    Method(
                        FunctionDef {
                            name: "run",
                            params: [
                                Param {
                                    name: "self",
                                    ty: Named(
                                        "Self",
                                    ),
                                },
                            ],
                            return_type: Unit,
                            body: Block {
                                stmts: [
                                    Let(
                                        LetStmt {
                                            ifmut: false,
                                            name: "period",
                                            ty: Some(
                                                Path(
                                                    [
                                                        "std",
                                                        "time",
                                                        "Duration",
                                                    ],
                                                ),
                                            ),
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "Duration",
                                                            "from_millis",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [
                                                        Path(
                                                            [
                                                                "self",
                                                                "period_ms",
                                                            ],
                                                            Member,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        },
                                    ),
                                    Let(
                                        LetStmt {
                                            ifmut: true,
                                            name: "rng",
                                            ty: None,
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "rand",
                                                            "thread_rng",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [],
                                                ),
                                            ),
                                        },
                                    ),
                                    Expr(
                                        Loop(
                                            Block {
                                                stmts: [
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "start",
                                                            ty: None,
                                                            init: Some(
                                                                Call(
                                                                    Path(
                                                                        [
                                                                            "Instant",
                                                                            "now",
                                                                        ],
                                                                        Namespace,
                                                                    ),
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "pressure_val",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "rng",
                                                                    ),
                                                                    "gen_range",
                                                                    [
                                                                        Literal(
                                                                            Int(
                                                                                0,
                                                                            ),
                                                                        ),
                                                                        Literal(
                                                                            Int(
                                                                                201,
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(tx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "pressure",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Let(
                                                                        LetStmt {
                                                                            ifmut: false,
                                                                            name: "_",
                                                                            ty: None,
                                                                            init: Some(
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "tx",
                                                                                    ),
                                                                                    "send",
                                                                                    [
                                                                                        Ident(
                                                                                            "pressure_val",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ),
                                                                        },
                                                                    ),
                                                                    Expr(
                                                                        Call(
                                                                            Path(
                                                                                [
                                                                                    "println!",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            [
                                                                                Literal(
                                                                                    Str(
                                                                                        "[tpms] send pressure = {:?}",
                                                                                    ),
                                                                                ),
                                                                                Ident(
                                                                                    "pressure_val",
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "elapsed",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "start",
                                                                    ),
                                                                    "elapsed",
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        If {
                                                            condition: BinaryOp(
                                                                Ident(
                                                                    "elapsed",
                                                                ),
                                                                "<",
                                                                Ident(
                                                                    "period",
                                                                ),
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        MethodCall(
                                                                            Path(
                                                                                [
                                                                                    "std",
                                                                                    "thread",
                                                                                    "sleep",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            "",
                                                                            [
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "period",
                                                                                    ),
                                                                                    "saturating_sub",
                                                                                    [
                                                                                        Ident(
                                                                                            "elapsed",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                ],
                                                expr: None,
                                            },
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Device execution entry point - periodically generates and sends data",
                            ],
                            attrs: [],
                        },
                    ),
                ],
                trait_impl: Some(
                    Named(
                        "Device",
                    ),
                ),
            },
        ),
        Struct(
            StructDef {
                name: "bluetooth_controllerDevice",
                fields: [
                    Field {
                        name: "music",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Sender",
                                    [
                                        Named(
                                            "bool",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: music Out",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "contacts",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Sender",
                                    [
                                        Named(
                                            "i8",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: contacts Out",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "period_ms",
                        ty: Named(
                            "u64",
                        ),
                        docs: [
                            "// 周期：2000ms",
                        ],
                        attrs: [],
                    },
                ],
                properties: [],
                generics: [],
                derives: [
                    "Debug",
                ],
                docs: [
                    "// AADL Device: bluetooth_controller",
                ],
                vis: Public,
            },
        ),
        Impl(
            ImplBlock {
                target: Named(
                    "bluetooth_controllerDevice",
                ),
                generics: [],
                items: [
                    Method(
                        FunctionDef {
                            name: "new",
                            params: [],
                            return_type: Named(
                                "Self",
                            ),
                            body: Block {
                                stmts: [
                                    Expr(
                                        Ident(
                                            "return Self {\n            music: None,\n            contacts: None,\n            period_ms: 2000,\n        }",
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Creates a new device instance",
                            ],
                            attrs: [],
                        },
                    ),
                    Method(
                        FunctionDef {
                            name: "run",
                            params: [
                                Param {
                                    name: "self",
                                    ty: Named(
                                        "Self",
                                    ),
                                },
                            ],
                            return_type: Unit,
                            body: Block {
                                stmts: [
                                    Let(
                                        LetStmt {
                                            ifmut: false,
                                            name: "period",
                                            ty: Some(
                                                Path(
                                                    [
                                                        "std",
                                                        "time",
                                                        "Duration",
                                                    ],
                                                ),
                                            ),
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "Duration",
                                                            "from_millis",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [
                                                        Path(
                                                            [
                                                                "self",
                                                                "period_ms",
                                                            ],
                                                            Member,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        },
                                    ),
                                    Let(
                                        LetStmt {
                                            ifmut: true,
                                            name: "rng",
                                            ty: None,
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "rand",
                                                            "thread_rng",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [],
                                                ),
                                            ),
                                        },
                                    ),
                                    Expr(
                                        Loop(
                                            Block {
                                                stmts: [
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "start",
                                                            ty: None,
                                                            init: Some(
                                                                Call(
                                                                    Path(
                                                                        [
                                                                            "Instant",
                                                                            "now",
                                                                        ],
                                                                        Namespace,
                                                                    ),
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "music_val",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "rng",
                                                                    ),
                                                                    "gen_bool",
                                                                    [
                                                                        Literal(
                                                                            Float(
                                                                                0.9,
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(tx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "music",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Let(
                                                                        LetStmt {
                                                                            ifmut: false,
                                                                            name: "_",
                                                                            ty: None,
                                                                            init: Some(
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "tx",
                                                                                    ),
                                                                                    "send",
                                                                                    [
                                                                                        Ident(
                                                                                            "music_val",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ),
                                                                        },
                                                                    ),
                                                                    Expr(
                                                                        Call(
                                                                            Path(
                                                                                [
                                                                                    "println!",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            [
                                                                                Literal(
                                                                                    Str(
                                                                                        "[bluetooth_controller] send music = {:?}",
                                                                                    ),
                                                                                ),
                                                                                Ident(
                                                                                    "music_val",
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "contacts_val",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "rng",
                                                                    ),
                                                                    "gen_range",
                                                                    [
                                                                        Literal(
                                                                            Int(
                                                                                0,
                                                                            ),
                                                                        ),
                                                                        Literal(
                                                                            Int(
                                                                                201,
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(tx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "contacts",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Let(
                                                                        LetStmt {
                                                                            ifmut: false,
                                                                            name: "_",
                                                                            ty: None,
                                                                            init: Some(
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "tx",
                                                                                    ),
                                                                                    "send",
                                                                                    [
                                                                                        Ident(
                                                                                            "contacts_val",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ),
                                                                        },
                                                                    ),
                                                                    Expr(
                                                                        Call(
                                                                            Path(
                                                                                [
                                                                                    "println!",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            [
                                                                                Literal(
                                                                                    Str(
                                                                                        "[bluetooth_controller] send contacts = {:?}",
                                                                                    ),
                                                                                ),
                                                                                Ident(
                                                                                    "contacts_val",
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "elapsed",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "start",
                                                                    ),
                                                                    "elapsed",
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        If {
                                                            condition: BinaryOp(
                                                                Ident(
                                                                    "elapsed",
                                                                ),
                                                                "<",
                                                                Ident(
                                                                    "period",
                                                                ),
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        MethodCall(
                                                                            Path(
                                                                                [
                                                                                    "std",
                                                                                    "thread",
                                                                                    "sleep",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            "",
                                                                            [
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "period",
                                                                                    ),
                                                                                    "saturating_sub",
                                                                                    [
                                                                                        Ident(
                                                                                            "elapsed",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                ],
                                                expr: None,
                                            },
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Device execution entry point - periodically generates and sends data",
                            ],
                            attrs: [],
                        },
                    ),
                ],
                trait_impl: Some(
                    Named(
                        "Device",
                    ),
                ),
            },
        ),
        Struct(
            StructDef {
                name: "speakerDevice",
                fields: [
                    Field {
                        name: "music",
                        ty: Generic(
                            "Option",
                            [
                                Generic(
                                    "Receiver",
                                    [
                                        Named(
                                            "bool",
                                        ),
                                    ],
                                ),
                            ],
                        ),
                        docs: [
                            "// Port: music In",
                        ],
                        attrs: [],
                    },
                    Field {
                        name: "period_ms",
                        ty: Named(
                            "u64",
                        ),
                        docs: [
                            "// 周期：2000ms",
                        ],
                        attrs: [],
                    },
                ],
                properties: [],
                generics: [],
                derives: [
                    "Debug",
                ],
                docs: [
                    "// AADL Device: speaker",
                ],
                vis: Public,
            },
        ),
        Impl(
            ImplBlock {
                target: Named(
                    "speakerDevice",
                ),
                generics: [],
                items: [
                    Method(
                        FunctionDef {
                            name: "new",
                            params: [],
                            return_type: Named(
                                "Self",
                            ),
                            body: Block {
                                stmts: [
                                    Expr(
                                        Ident(
                                            "return Self {\n            music: None,\n            period_ms: 2000,\n        }",
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Creates a new device instance",
                            ],
                            attrs: [],
                        },
                    ),
                    Method(
                        FunctionDef {
                            name: "run",
                            params: [
                                Param {
                                    name: "self",
                                    ty: Named(
                                        "Self",
                                    ),
                                },
                            ],
                            return_type: Unit,
                            body: Block {
                                stmts: [
                                    Let(
                                        LetStmt {
                                            ifmut: false,
                                            name: "period",
                                            ty: Some(
                                                Path(
                                                    [
                                                        "std",
                                                        "time",
                                                        "Duration",
                                                    ],
                                                ),
                                            ),
                                            init: Some(
                                                Call(
                                                    Path(
                                                        [
                                                            "Duration",
                                                            "from_millis",
                                                        ],
                                                        Namespace,
                                                    ),
                                                    [
                                                        Path(
                                                            [
                                                                "self",
                                                                "period_ms",
                                                            ],
                                                            Member,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        },
                                    ),
                                    Expr(
                                        Loop(
                                            Block {
                                                stmts: [
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "start",
                                                            ty: None,
                                                            init: Some(
                                                                Call(
                                                                    Path(
                                                                        [
                                                                            "Instant",
                                                                            "now",
                                                                        ],
                                                                        Namespace,
                                                                    ),
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Comment(
                                                        "// --- 从输入端口接收数据 ---",
                                                    ),
                                                    Expr(
                                                        IfLet {
                                                            pattern: "Some(rx)",
                                                            value: Reference(
                                                                Path(
                                                                    [
                                                                        "self",
                                                                        "music",
                                                                    ],
                                                                    Member,
                                                                ),
                                                                true,
                                                                false,
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        IfLet {
                                                                            pattern: "Ok(music_in_val)",
                                                                            value: MethodCall(
                                                                                Ident(
                                                                                    "rx",
                                                                                ),
                                                                                "try_recv",
                                                                                [],
                                                                            ),
                                                                            then_branch: Block {
                                                                                stmts: [
                                                                                    Expr(
                                                                                        Call(
                                                                                            Path(
                                                                                                [
                                                                                                    "println!",
                                                                                                ],
                                                                                                Namespace,
                                                                                            ),
                                                                                            [
                                                                                                Literal(
                                                                                                    Str(
                                                                                                        "[speaker] Received music: {:?}",
                                                                                                    ),
                                                                                                ),
                                                                                                Ident(
                                                                                                    "music_in_val",
                                                                                                ),
                                                                                            ],
                                                                                        ),
                                                                                    ),
                                                                                    Comment(
                                                                                        "// TODO: 在此处加入执行逻辑",
                                                                                    ),
                                                                                ],
                                                                                expr: None,
                                                                            },
                                                                            else_branch: None,
                                                                        },
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                    Let(
                                                        LetStmt {
                                                            ifmut: false,
                                                            name: "elapsed",
                                                            ty: None,
                                                            init: Some(
                                                                MethodCall(
                                                                    Ident(
                                                                        "start",
                                                                    ),
                                                                    "elapsed",
                                                                    [],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    Expr(
                                                        If {
                                                            condition: BinaryOp(
                                                                Ident(
                                                                    "elapsed",
                                                                ),
                                                                "<",
                                                                Ident(
                                                                    "period",
                                                                ),
                                                            ),
                                                            then_branch: Block {
                                                                stmts: [
                                                                    Expr(
                                                                        MethodCall(
                                                                            Path(
                                                                                [
                                                                                    "std",
                                                                                    "thread",
                                                                                    "sleep",
                                                                                ],
                                                                                Namespace,
                                                                            ),
                                                                            "",
                                                                            [
                                                                                MethodCall(
                                                                                    Ident(
                                                                                        "period",
                                                                                    ),
                                                                                    "saturating_sub",
                                                                                    [
                                                                                        Ident(
                                                                                            "elapsed",
                                                                                        ),
                                                                                    ],
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ],
                                                                expr: None,
                                                            },
                                                            else_branch: None,
                                                        },
                                                    ),
                                                ],
                                                expr: None,
                                            },
                                        ),
                                    ),
                                ],
                                expr: None,
                            },
                            asyncness: false,
                            vis: None,
                            docs: [
                                "// Device execution entry point - periodically generates and sends data",
                            ],
                            attrs: [],
                        },
                    ),
                ],
                trait_impl: Some(
                    Named(
                        "Device",
                    ),
                ),
            },
        ),
        LazyStatic(
            LazyStaticDef {
                name: "CPU_ID_TO_SCHED_POLICY",
                ty: Generic(
                    "HashMap",
                    [
                        Named(
                            "isize",
                        ),
                        Named(
                            "i32",
                        ),
                    ],
                ),
                init: Block {
                    stmts: [
                        Let(
                            LetStmt {
                                ifmut: true,
                                name: "map",
                                ty: Some(
                                    Generic(
                                        "HashMap",
                                        [
                                            Named(
                                                "isize",
                                            ),
                                            Named(
                                                "i32",
                                            ),
                                        ],
                                    ),
                                ),
                                init: Some(
                                    Call(
                                        Path(
                                            [
                                                "HashMap",
                                                "new",
                                            ],
                                            Namespace,
                                        ),
                                        [],
                                    ),
                                ),
                            },
                        ),
                        Expr(
                            MethodCall(
                                Ident(
                                    "map",
                                ),
                                "insert",
                                [
                                    Literal(
                                        Int(
                                            0,
                                        ),
                                    ),
                                    Path(
                                        [
                                            "SCHED_FIFO",
                                        ],
                                        Namespace,
                                    ),
                                ],
                            ),
                        ),
                        Expr(
                            Ident(
                                "return map",
                            ),
                        ),
                    ],
                    expr: None,
                },
                vis: Public,
                docs: [
                    "// CPU ID到调度策略的映射",
                ],
            },
        ),
    ],
    attrs: [],
    vis: Public,
}