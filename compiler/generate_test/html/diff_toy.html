<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<title>Diff for Toy</title>
<style>
body {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  background: #1e1e1e;
  color: #d4d4d4;
}
pre {
  white-space: pre-wrap;
}
.line-add    { background-color: #003800; color: #c8ffc8; }
.line-remove { background-color: #3f0001; color: #ffcccc; }
.line-header { color: #4fc1ff; font-weight: bold; }
</style>
</head>
<body>
<h2>Diff for Toy</h2>
<pre>
<span class="line-remove">--- original</span>
<span class="line-add">+++ modified</span>
<span class="line-header">@@ -1,5 +1,5 @@</span>
 // Auto-generated from AADL package: toy_example_nowrapper
<span class="line-remove">-// 生成时间: 2025-12-17 22:52:30</span>
<span class="line-add">+// 生成时间: 2025-12-20 17:31:23</span>

 #![allow(unused_imports)]
 use crossbeam_channel::{Receiver, Sender};
<span class="line-header">@@ -139,11 +139,11 @@</span>
     // 创建组件并初始化AADL属性
     fn new(cpu_id: isize, gnc_pos: POSShared) -&gt; Self {
         return Self {
<span class="line-remove">-            deadline: 1000, </span>
             priority: 50, 
<span class="line-remove">-            gnc_pos: gnc_pos, </span>
             period: 1000, 
             dispatch_protocol: &quot;Periodic&quot;.to_string(), 
<span class="line-add">+            gnc_pos: gnc_pos, </span>
<span class="line-add">+            deadline: 1000, </span>
             cpu_id: cpu_id, // CPU ID
         };
     }
<span class="line-header">@@ -215,10 +215,10 @@</span>
     // 创建组件并初始化AADL属性
     fn new(cpu_id: isize, tmtc_pos: POSShared) -&gt; Self {
         return Self {
<span class="line-add">+            dispatch_protocol: &quot;Periodic&quot;.to_string(), </span>
             deadline: 100, 
<span class="line-remove">-            priority: 20, </span>
             period: 100, 
<span class="line-remove">-            dispatch_protocol: &quot;Periodic&quot;.to_string(), </span>
<span class="line-add">+            priority: 20, </span>
             tmtc_pos: tmtc_pos, 
             cpu_id: cpu_id, // CPU ID
         };
<span class="line-header">@@ -272,11 +272,8 @@</span>
 #[derive(Debug)]
 pub struct toy_example_procProcess {
     pub cpu_id: isize,// 进程 CPU ID
<span class="line-remove">-    #[allow(dead_code)]</span>
     pub gnc_th: gnc_threadThread,// 子组件线程（GNC_Th : thread GNC_Thread）
<span class="line-remove">-    #[allow(dead_code)]</span>
     pub tmtc_th: tmtc_threadThread,// 子组件线程（TMTC_Th : thread TMTC_Thread）
<span class="line-remove">-    #[allow(dead_code)]</span>
     pub pos_data: POSShared,// 共享数据（POS_Data : data POS）
 }

<span class="line-header">@@ -290,7 +287,7 @@</span>
     }
     
     // Starts all threads in the process
<span class="line-remove">-    fn start(self: Self) -&gt; () {</span>
<span class="line-add">+    fn run(self: Self) -&gt; () {</span>
         let Self { gnc_th, tmtc_th, pos_data, cpu_id, .. } = self;
         thread::Builder::new()
             .name(&quot;gnc_th&quot;.to_string())
<span class="line-header">@@ -305,7 +302,6 @@</span>
 // AADL System: toy_example
 #[derive(Debug)]
 pub struct toy_exampleSystem {
<span class="line-remove">-    #[allow(dead_code)]</span>
     pub gnc_tmtc_pos: toy_example_procProcess,// 子组件进程（GNC_TMTC_POS : process Toy_Example_Proc）
 }

<span class="line-header">@@ -312,13 +308,13 @@</span>
 impl System for toy_exampleSystem {
     // Creates a new system instance
     fn new() -&gt; Self {
<span class="line-remove">-        let mut gnc_tmtc_pos: toy_example_procProcess = toy_example_procProcess::new(0);</span>
<span class="line-add">+        let mut gnc_tmtc_pos: toy_example_procProcess = toy_example_procProcess::new(2);</span>
         return Self { gnc_tmtc_pos }  //显式return;
     }
     
     // Runs the system, starts all processes
     fn run(self: Self) -&gt; () {
<span class="line-remove">-        self.gnc_tmtc_pos.start();</span>
<span class="line-add">+        self.gnc_tmtc_pos.run();</span>
     }
     
 }
<span class="line-header">@@ -327,6 +323,8 @@</span>
 lazy_static! {
     static ref CPU_ID_TO_SCHED_POLICY: HashMap&lt;isize, i32&gt; = {
         let mut map: HashMap&lt;isize, i32&gt; = HashMap::new();
<span class="line-add">+        map.insert(2, SCHED_FIFO);</span>
<span class="line-add">+        map.insert(1, SCHED_FIFO);</span>
         map.insert(0, SCHED_FIFO);
         return map;
     };

</pre>
</body>
</html>
